<div id="content">
  <div id="map"></div>
</div>

<div id="wrapper_header">
  <div id="header">
    <nav class="navbar navbar-default" role="navigation">
    <!--<button (click)="setUserName()" class="btn btn-default"> </button>-->
    <div id="logo"></div>
    <div id="name">Yandex Map</div>
    <div>
     <form #mForm="ngForm" class="navbar-form navbar-left" role="search" novalidate (ngSubmit)="toSearchMarker(mForm)">
       <div [class.has-error]="mForm.invalid && mForm.touched" [class.has-success]="mForm.valid" class="form-group">
          <input name="lat" id="latSearch" type="text" ngModel #lat="ngModel"
          class="form-control" required pattern="^[+-]?((([\d]|[1-2][\d]|[3-4][\d]|[5-6][\d]|7[\d]|8[0-4])[.]{1}[\d]{1,16})|([\d]|[1-2][\d]|[3-4][\d]|[5-6][\d]|7[\d]|8[0-5]))$" placeholder="latitude">
       </div>
       <div [class.has-error]="mForm.invalid && mForm.touched" [class.has-success]="mForm.valid" class="form-group">
          <input name="lng" id="lngSearch" type="text" ngModel #lng="ngModel"
          class="form-control" required pattern="^[+-]?((([0-9]|[1-2][\d]|[3-4][\d]|[5-6][\d]|[7-8][\d]|9[\d]|10[\d]|1[0-2][\d]|1[2-3][\d]|1[4-5][\d]|1[5-6][\d]|17[\d])[.]{1}[\d]{1,16})|([\d]|[1-2][\d]|[3-4][\d]|[5-6][\d]|[7-8][\d]|9[\d]|1[0-1][\d]|1[2-3][\d]|1[4-5][\d]|1[5-6][\d]|17[\d]|180))$" placeholder="longitude">
       </div>
       <div class="form-group">
         <button name="but-search" type="submit" [disabled]="mForm.invalid" class="btn btn-default">
           <span class="glyphicon glyphicon-search"></span>Search
         </button>
       </div>
       <div class="form-group btn-wrapper-search" [style.display]= "!submittedForm ? 'none' : 'inline'" >
         <button  [style.display]="isSaveSearchMarker ? 'none' : 'inline-block' " (click)="saveSearchMark()" type="button" class="btn btn-default">
           <span class="glyphicon glyphicon-heart-empty"></span>
         </button>
         <button  [style.display]="isSaveSearchMarker ? 'inline-block' : 'none' " (click)="deleteSearchMark()" type="button" class="btn btn-default">
           <span class="glyphicon glyphicon-heart"></span>
         </button>
       </div>
    </form>
   </div>
   <ul class="nav navbar-nav navbar-right" style="margin-top: .6em; margin-right: .5em;">
     <li>
       <button name="but-change-prop" type="submit" class="btn btn-default" (click)="downloadPdfFile()" ><span class="glyphicon glyphicon-download-alt"></span>Отчёт</button>
     </li>
     <li>
       <a id="linkLogout" href="./logout">Logout</a>
     </li>
     <li>
       <div> <p>Welcome,<br> user <strong>{{currentUserName}}</strong> !</p></div>
     </li>
   </ul>
 </nav>
 </div>
</div>

<div id="infoMark" *ngIf="!!selectedMark.longitude">
  <div id="iMark">
    <h1>Info of a mark</h1>
    <div class="btn-wrapper">
      <button [style.display]="isSaveSelectedMarker ? 'none' : 'inline-block' " (click)="saveSelectedMark()" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-heart-empty"></span>
      </button>
      <button [style.display]="isSaveSelectedMarker ? 'inline-block' : 'none' " (click)="deleteSelectedMark()" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-heart"></span>
      </button>
    </div>
  </div>
  <div id="propertiesMark">
    <strong>Name: </strong>{{selectedMark.iconContent}}<br>
    <strong>Coords: </strong> ({{selectedMark.latitude}}, {{selectedMark.longitude}})
    <textarea rows="6" class="form-control" disabled>{{selectedMark.balloonContentBody}}</textarea>
  </div>
</div>

<div id="tableMarksHeader">
  <h1>Table of marks</h1>
  <div id="tableMarks">
    <ul class="Marks">
      <li *ngFor="let m of markers"><div id="table-span">{{m.iconContent}}</div>
        <div id="table-buttons">
          <button (click)="getModalFormForMark(m)" id="changeIcon" type="button" class="btn btn-link btn-xs">
            <span class="glyphicon glyphicon-pencil"></span>
          </button>
          <button (click)="deleteMarkFromTable(m)" id="trashIcon" type="button" class="btn btn-link btn-xs">
            <span  class="glyphicon glyphicon-trash"></span>
          </button>
        </div>
      </li>
    </ul>
  </div>
</div>

<div id="ModalFormChangeProp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xs">
  <div class="modal-content">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Закрыть">
      <span aria-hidden="true">×</span>
    </button>
    <h4 class="modal-title" id="myModalLabel">Changing mark properties</h4>
    </div>
    <div class="modal-body">
    <form id="changePropMark" #modalForm="ngForm" class="form-horizontal" role="form" novalidate (ngSubmit)="changeFieldMark(modalForm)">
      <div class="col-md-10" style="display: none;">
        <input type="text" name="idMark" class="form-control" id="idMark" ngModel #idMark="ngModel">
      </div>
      <div class="form-group" [class.has-error]="bi.invalid && bi.touched" [class.has-success]="bi.valid">
        <label for="nameMark" class="col-md-2 control-label">Name mark</label>
        <div class="col-md-10">
          <input type="text" name="nameMark" class="form-control" id="nameMark" ngModel #nameMark="ngModel" required pattern="^[\w\d\sа-яА-Я0-9-,.ёЁ ]{2,50}$" placeholder="Name">
        </div>
      </div>
      <div class="form-group" [class.has-error]="lat.invalid && lat.touched" [class.has-success]="lat.valid">
        <label for="latMark" class="col-md-2 control-label">Latitude</label>
        <div class="col-md-10">
          <input type="text" name="latMark" class="form-control" id="latMark" ngModel #latMark="ngModel" required pattern="^[+-]?((([\d]|[1-2][\d]|[3-4][\d]|[5-6][\d]|7[\d]|8[0-4])[.]{1}[\d]{1,16})|([\d]|[1-2][\d]|[3-4][\d]|[5-6][\d]|7[\d]|8[0-5]))$" placeholder="Latitude" disabled>
        </div>
      </div>
      <div class="form-group" [class.has-error]="lng.invalid && lng.touched" [class.has-success]="lng.valid">
        <label for="lngMark" class="col-md-2 control-label">Longitude</label>
        <div class="col-md-10">
          <input type="text" name="lngMark" class="form-control" id="lngMark" ngModel #lngMark="ngModel" required pattern="^[+-]?((([0-9]|[1-2][\d]|[3-4][\d]|[5-6][\d]|[7-8][\d]|9[\d]|10[\d]|1[0-2][\d]|1[2-3][\d]|1[4-5][\d]|1[5-6][\d]|17[\d])[.]{1}[\d]{1,16})|([\d]|[1-2][\d]|[3-4][\d]|[5-6][\d]|[7-8][\d]|9[\d]|1[0-1][\d]|1[2-3][\d]|1[4-5][\d]|1[5-6][\d]|17[\d]|180))$" placeholder="Longitude" disabled>
        </div>
      </div>
      <div class="form-group" [class.has-error]="di.invalid && di.touched" [class.has-success]="di.valid">
        <label for="addressMark" class="col-md-2 control-label">Address</label>
        <div class="col-md-10">
          <input type="text" name="addressMark" class="form-control" id="addressMark" ngModel #addressMark="ngModel" pattern="^[\w\d\sа-яА-Я0-9-,. ]{2,200}$" placeholder="Address" disabled>
        </div>
      </div>
      <div class="form-group">
        <label for="iconOption" class="col-md-2 control-label">Type of an icon</label>
        <div class="col-md-10">
          <select name="iconOption" id="iconOption" form="changePropMark" ngModel class="form-control">
            <option>Standard icon</option>
            <option>Male</option>
            <option>Male 2</option>
            <option>Female</option>
            <option>Female 2</option>
            <option>Work</option>
            <option>House</option>
            <option>Worker</option>
            <option>Businessman</option>
            <option>Sity</option>
            <option>Apartment</option>
            <option>Factory</option>
            <option>Department</option>
            <option>Clinic</option>
            <option>Courthouse</option>
            <option>Embassy</option>
            <option>Hotel five stars</option>
            <option>Hotel four stars</option>
            <option>Hotel three stars</option>
            <option>Museum</option>
            <option>Warehouse</option>
            <option>Kremlin</option>
            <option>Shopping</option>
            <option>Treehouse</option>
            <option>Cave</option>
            <option>Forest</option>
            <option>Camping tent</option>
            <option>Campfire</option>
            <option>Beach</option>
            <option>Beach ball</option>
            <option>Log cabin</option>
            <option>Star</option>
            <option>Heart</option>
            <option>University</option>
            <option>Student male</option>
            <option>Student female</option>
            <option>Maintenance</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
          <button name="but-change-prop" type="submit" [disabled]="modalForm.invalid" class="btn btn-default">Change</button>
        </div>
      </div>
    </form>
    </div>
  </div>
  </div>
</div>
